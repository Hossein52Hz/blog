+++
title = "آموزش بارگذاری پلاگین تایید شده در مخزن وردپرس"
description = "wordpress"
author = "Hossein Masoudi"
date = 2019-05-09T02:34:26+04:30
tags = []
draft = false
+++

با سلام خدمت دوستان وردپرسی

ممکنه براتون پیش اومده باشه که بخواید یک پلاگین را توی مخزن وردپرس قرار بدید.
برای این کار کافیه ابتدا داخل سایت [Wordpress](https://wordpress.org/) ثبت نام کنید و بعد در بخش پلاگین ها پلاگین خودتون را [اینجا آپلود](https://wordpress.org/plugins/developers/add/) کنید.

بعد از آپلود و دریافت ایمیل های تایید و رفع اشکالات و .... زمانی که پلاگین شما تایید نهایی شد با پیغامی در صفحه ای که پلاگین را آپلود کرده بودید مواجه میشید که میگه پلاگین شما تایید شده کافیه با svn اونا بارگزاری کنید.

اگر نمیدونید svn چیه در این حد بگم که یک نرم افزار شبیه git برای کنترل نسخه کدهاتون هست که وردپرس برای مدیریت پلاگین ها روی مخزن ازش استفاده می کنه. کافیه نسخه کلاینتش را روی سیستم عامل تون نصب کنید. برای ویندوز هم مثل اینکه ابزار گرافیکی به نام [Tortoise SVN](https://tortoisesvn.net/) هست که میتونید دانلود و نصب کنید. در اینجا من نحوه استفاده از svn را در خط فرمان توضیح میدم.

خب دیگه بریم سراغ مرحله اصلی.
ابتدا یک پوشه ایجاد می کنیم مثلا test و وارد پوشه می شیم.

{{< highlight shell >}}

$ mkdir test

$ cd test/

{{< / highlight >}}

بعد از وارد شدن به این پوشه دستور زیر را اجرا کنید

{{< highlight shell >}}

$ svn co https://plugins.svn.wordpress.org/yourpluginname

{{< / highlight >}}

کلمه yourpluginname اسم پلاگین شماست که وردپرس براتون توی ایمیل ارسال کرده و با این اسم پلاگینتون قرار هست داخل مخزن وردپرس منتشر بشه.

در واقع با اجرای دستور بالا شما فایل های مربوط به پروژه ای را که وردپرس براتون ایجاد کرده را دانلود می کنید. 
بعد از اجرای دستور بالا یک پیغام بهتون میده که شما enter را بزنید.
بعدش یک پیغام شبیه زیر در خروجی ترمینال خواهید داشت

{{< highlight shell >}}

A    yourpluginname/tags
A    yourpluginname/assets
A    yourpluginname/trunk
A    yourpluginname/branches
Checked out revision 111111.

{{< / highlight >}}

خب اینجا ما چندتا پوشه داریم. مهمترین پوشه trunk هست که شما باید فایل های اصلی پلاگین تون را داخل این پوشه قرار بدید.

پوشه assets مسیری هست که باید فایل های مربوط به آیکن پلاگین، بنر پلاگین و اسکرین شات های پلاگین را داخلش قرار بدید.
در مورد نحوه نام گذاری این فایل ها هم باید استاندارد وردپرس را رعایت کنید که از [اینجا](https://developer.wordpress.org/plugins/wordpress-org/plugin-assets/) میتونید اطلاعات بیشتری پیدا کنید.

و اما پوشه مهم دیگه ای که باهاش سر و کار دارید tags هست که مربوط به زمانی هست که شما کدهای پلاگین تون را بروزرسانی میکنید و نسخه پلاگینتون را آپدیت میکنید که جلوتر در موردش صحبت می کنم.

خب مرحله به مرحله میریم جلو. ابتدا کل فایل های پلاگین را داخل پوشه trunk قرار میدیم و بعد از اون باید فایل های داخل trunk را به استیج اضافه کنیم. برای این کار دستور زیر را اجرا کنید:

{{< highlight shell >}}

$ svn add trunk/*

{{< / highlight >}}

مرحله بعدی این هست که شما باید فایل هاتون را ارسال کنید به مخزن شبیه push که داخل گیت انجام میدیم هست. برای این کار دستور زیر را اجرا می کنیم

{{< highlight shell >}}

$ svn ci -m 'Adding first version of my plugin'

{{< / highlight >}}

سوئیچ -m  هم برای کامیت کردن استفاده میشه و متن داخل تک کوتیشن هم کامیت من هست شما هرچی خواستید بنویسید.

بعد از اجرا دستور بالا از شما نام کاربری و رمز عبور داخل سایت وردپرس را میخواد که حواستون باشه نام کاربریتون هم به حروف بزرگ و کوچیک حساس هست.

بعد از زدن نام کاربری و رمز عبور سایت وردپرس در خط فرمان کار شما تمام هست. تبریک میگم پلاگین شما روی مخزن وردپرس منتشر شده. کافیه چند دقیقه صبر کنید و بعد به آدرس مربوط به پلاگین تون برید

{{< highlight shell >}}

https://wordpress.org/plugins/yourpluginname

{{< / highlight >}}

خب مرحله بعدی عکس بنر و لوگو پلاگین هست که کافیه عکس هاتون را که حتما باید با نام های زیر باشند داخل پوشه assets قرار بدید. 

{{< highlight shell >}}

banner-772x250.png
icon-256x256.png

screenshot-1.jpg
screenshot-2.jpg

{{< / highlight >}}

توضیحات کامل تر در مورد تصاویر پلاگین را [اینجا](https://developer.wordpress.org/plugins/wordpress-org/plugin-assets/) میتونید بخونید.

حالا دستور زیر را مثل مرحله قبل برای فایل های داخل این پوشه اجرا کنید.

{{< highlight shell >}}

$ svn add assets/*

{{< / highlight >}}

و بعد هم کامیت و pull کردن فایل ها روی مخزن وردپرس

{{< highlight shell >}}

$ svn ci -m 'Adding plugin banner/icons'

{{< / highlight >}}

توی این مرحله هم ممکنه ازتون نام کاربری و رمز عبور بخواد که باید وارد کنید.

تبریک میگم تا اینجای کار هم فایل های اصلی پلاگین و هم تصاویر مربوط به بنر و لوگو و اسکرین شات های پلاگین که داخل صفحه اصلی پلاگین داخل مخزن وردپرس نمایش داده میشه را به درستی بارگزاری کردید.

خب تا اینجای کار همه چیز عالی پیش رفته و پلاگین شما روی مخزن وردپرس منتشر شده.
حالا فرض کنید که شما تغییراتی داخل کدهای پلاگینتون دادید و میخواید پلاگین تون را بروزرسانی کنید. توجه کنید من فرض میکنم که شما بعد از بروزرسانی کدهای پلاگین تون فایل readme.txt تون را هم بروزرسانی کردید. در مورد نحوه نوشتن محتوای این فایل هم میتونید به [اینجا](https://developer.wordpress.org/plugins/wordpress-org/how-your-readme-txt-works/) مراجعه کنید.
یادتون نره نسخه ای که داخل فایل php اصلی پلاگین تون که هم نام با اسم پلاگین تون هست و شناسنامه پلاگینتون ابتدای فایل قرار داره هم نسخه Stable tag پلاگین را بروزرسانی کنید.

خب من یک پوشه جدید به نام newversion ایجاد می کنم. و فایل های فعلی پلاگین را از روی مخزن fetch می کنم. برای این کار دستور زیر را اجرا می کنم.

{{< highlight shell >}}

$ svn co https://plugins.svn.wordpress.org/mypluginname

{{< / highlight >}}

خب تغییرات مربوط به فایل های پلاگین را میتونم داخل پوشه trunk انجام بدم یا کلا فایل های تغییر داده شده پلاگین را داخل این پوشه جایگزین کنم.
حواستون باشه که حتما شماره نسخه stable tag را داخل فایل اصلی پلاگین که هم نام پلاگین هست بروزرسانی کنید.
فرض کنید نسخه اصلی پلاگین 1.0.0 بوده و ما تغییرات جدید را اضافه کردیم پس نسخه stable tag میشه 1.0.1 یا هر شماره نسخه ای که مد نظر دارید.
بعد از اعمال تغییرات کدها و بروزرسانی فایل readme.txt و اضافه کردن بخش  Changelog 
داخل این فایل که میتونید در موردش [اینجا](https://developer.wordpress.org/plugins/wordpress-org/how-your-readme-txt-works/) بیشتر مطالعه کنید. دستور زیر را اجرا کنید.

{{< highlight shell >}}

$ svn cp trunk tags/1.0.1

{{< / highlight >}}

یادتون باشه که 1.0.1 شماره نسخه جدید هست. با اجرای این دستور یک نسخه از فایل های تغییر یافته پلاگین در پوشه trunk داخل پوشه tags/1.0.1 قرار میگیره و چون شما مقدار stable tag را داخل فایل اصلی پلاگین و فایل readme به 1.0.1 تغییر دادید از این پس این نسخه به عنوان نسخه اصلی روی مخزن در نظر گرفته میشه.

بعد از اجرای دستور بالا برای این که فایل به مخزن ارسال بشه کافیه دستور زیر را اجرا کنید

{{< highlight shell >}}

$ svn ci -m "tagging version 1.0.1"

{{< / highlight >}}

تبریک میگم شما تغییرات نسخه جدید پلاگین تون را هم روی مخزن بروزرسانی کردید. توجه کنید که تغییرات روی مخزن ممکنه ۱۵دقیقه طول بکشه اعمال بشه.

این هم چندتا منبع خوب:

* [داکیومنت توسعه پلاگین های وردپرسی](https://developer.wordpress.org/plugins/)
* [نحوه کار با svn](https://developer.wordpress.org/plugins/wordpress-org/how-to-use-subversion/)
* [سوالات متداول توسعه دهندگان](https://developer.wordpress.org/plugins/wordpress-org/plugin-developer-faq/)
* [راهنمای مربوط به بخش assets](https://developer.wordpress.org/plugins/wordpress-org/plugin-assets/)
* [راهنمای فایل readme.txt پلاگین](https://developer.wordpress.org/plugins/wordpress-org/how-your-readme-txt-works/)

سوالی داشتید داخل کامنت ها بپرسید سعی می کنم جواب بدم.

موفق باشید
